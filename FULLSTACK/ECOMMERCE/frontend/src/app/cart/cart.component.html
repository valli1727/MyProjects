<div class="container container-fluid">
  <!-- Cart Header -->
  <h2 class="mt-5" *ngIf="cartItems.length > 0">
    Your Cart: <b>{{ cartCount }} items</b>
  </h2>

  <div class="row d-flex justify-content-between">
    <!-- Cart Items Section -->
    <div class="col-12 col-lg-8">
      <hr />

      <!-- Show Cart Items if Any -->
      <div *ngIf="cartItems.length > 0; else emptyCart">
        <div *ngFor="let item of cartItems" class="cart-item">
          <div class="row">
            <!-- Product Image -->
            <div class="col-4 col-lg-3">
              <img
                [src]="'assets' + item.product.images[0].image"
                alt="{{ item.product.name }}"
                height="90"
                width="115"
              />
            </div>

            <!-- Product Name -->
            <div class="col-5 col-lg-3">
              <a [routerLink]="'/product/' + item.product._id">
                {{ item.product.name }}
              </a>
            </div>

            <!-- Product Price -->
            <div class="col-4 col-lg-2 mt-4 mt-lg-0">
              <p id="card_item_price">${{ item.product.price }}</p>
            </div>

            <!-- Quantity Control -->
            <div class="col-4 col-lg-3 mt-4 mt-lg-0">
              <div class="stockCounter d-inline">
                <span
                  class="btn btn-danger minus"
                  (click)="decreaseQty(item.product._id)"
                  >-</span
                >
                <input
                  type="number"
                  class="form-control count d-inline"
                  [value]="item.qty"
                  readonly
                />
                <span
                  class="btn btn-primary plus"
                  (click)="increaseQty(item.product._id)"
                  >+</span
                >
              </div>
            </div>

            <!-- Delete Item -->
            <div class="col-4 col-lg-1 mt-4 mt-lg-0">
              <i
                id="delete_cart_item"
                class="fa fa-trash btn btn-danger"
                (click)="deleteItem(item.product._id)"
              ></i>
            </div>
          </div>
        </div>
      </div>

      <!-- Empty Cart Template -->
      <ng-template #emptyCart>
        <h3 class="mt-4">Cart is Empty!</h3>
      </ng-template>

      <hr />
    </div>

    <!-- Order Summary Section -->
    <div class="col-12 col-lg-3 my-4" *ngIf="cartItems.length > 0">
      <div id="order_summary">
        <h4>Order Summary</h4>
        <hr />
        <p>
          Subtotal:
          <span class="order-summary-values">{{ subTotal }} (Units)</span>
        </p>
        <p>
          Est. total:
          <span class="order-summary-values">${{ estTotal.toFixed(2) }}</span>
        </p>
        <hr />
        <button
          id="checkout_btn"
          class="btn btn-primary btn-block"
          (click)="orderComplete()"
        >
          Check out
        </button>
      </div>
    </div>
  </div>
</div>
